<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/svg+xml" href="/favicon-16x16.png"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"><!-- <link rel="icon" type="image/svg+xml" href="/favicon-16x16.png" /> --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300;400;500;700;800;900&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><meta name="facebook-domain-verification" content="6utfysbhmmy73m1e92ula8glanfv79"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v4.2.3"><!-- <title>{pageTitle}</title>
    <meta name="description" content={description}> --><title>Create a simple CRUD app | Error Handling & Fix </title><link rel="canonical" href="https://www.fabiobiondi.dev/tutorials/angular/simple-crud-in-angular/6-error-handling/"><meta name="description" content="In this part of the tutorial you will fix some UI problems and you will learn some tricks to handle HTTP errors by using <code>Promise</code>s and <code>Observable</code>s"><meta name="robots" content="index, follow"><meta property="og:title" content="Create a simple CRUD app | Error Handling &#38; Fix"><meta property="og:type" content="In this part of the tutorial you will fix some UI problems and you will learn some tricks to handle HTTP errors by using <code>Promise</code>s and <code>Observable</code>s"><meta property="og:image" content="https://www.fabiobiondi.dev/_astro/image.VHOF0DkQ.png"><meta property="og:url" content="https://www.fabiobiondi.dev/tutorials/angular/simple-crud-in-angular/6-error-handling/"><meta property="og:image:url" content="https://www.fabiobiondi.dev/_astro/image.VHOF0DkQ.png"><meta property="og:image:alt" content="Create a simple CRUD app | Error Handling &#38; Fix"><meta property="article:published_time" content="2022-12-28T00:00:00.000Z"><meta property="article:author" content="Fabio Biondi"><meta property="article:section" content="Programming"><meta property="article:tag" content="angular"><meta property="article:tag" content="typescript"><meta name="twitter:image" property="https://www.fabiobiondi.dev/_astro/image.VHOF0DkQ.png"><meta name="twitter:title" property="Create a simple CRUD app | Error Handling &#38; Fix"><meta name="twitter:description" property="In this part of the tutorial you will fix some UI problems and you will learn some tricks to handle HTTP errors by using <code>Promise</code>s and <code>Observable</code>s"><!-- <script is:inline src="/helpers/theme.utils.js"></script> --><script>
      const currentTheme = localStorage.getItem('theme') || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");

      // Get the current theme from local storage
      if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }

      // If the current local storage item can be found
      if (currentTheme) {
        // Set the body data-theme attribute to match the local storage item
        document.documentElement.setAttribute("data-theme", currentTheme);
        window.localStorage.setItem("theme", currentTheme);
        //document.documentElement.classList.add("dark");
        // If the current theme is dark, check the theme toggle
        // if (currentTheme === "dark") {
        //   themeToggle.checked = true;
        // }
      }
    </script><style>.steps[data-astro-cid-lwd7ki6e] .step[data-astro-cid-lwd7ki6e]:before{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.steps[data-astro-cid-lwd7ki6e] .step[data-astro-cid-lwd7ki6e]:after{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.steps[data-astro-cid-lwd7ki6e] .step-info[data-astro-cid-lwd7ki6e]:after{--tw-bg-opacity: 1;background-color:rgb(14 165 233 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/about.H_WvnixI.css" />
<style>.dark .kbd{--tw-bg-opacity: 1;background-color:rgb(15 23 42 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.hint p,.hint li{font-size:1rem;line-height:1.5rem}@media (min-width: 1280px){.hint p,.hint li{font-size:1.25rem;line-height:1.75rem}}.paragraph[data-astro-cid-kpqbyg4j]{margin:0 auto;width:100%;max-width:120ch;padding:0 1rem;line-height:1.5}.hidden[data-astro-cid-22xs7k66]{display:none}.youtubeModalTrigger p{margin:0;padding:0}
</style>
<link rel="stylesheet" href="/_astro/index.Q2hbxR4i.css" />
<link rel="stylesheet" href="/_astro/index.6O5HehPT.css" />
<link rel="stylesheet" href="/_astro/index.FzdydfRP.css" /><script type="module" src="/_astro/hoisted.I7Bsg5q7.js"></script></head> <body> <div id="iframe_youtube_wrapper" class=" fixed top-0 bottom-0 left-0 right-0 z-50  text-white  flex justify-center align-middle items-center mx-auto " style="visibility: hidden; backdrop-filter: blur(10px); background-color: rgba(0,0,0,0.5)" data-astro-cid-22xs7k66> <iframe id="iframe_youtube" style="background: #000; color-scheme: normal" class=" aspect-video bg-black" allowfullscreen allowtransparency="false" loading="lazy" data-astro-cid-22xs7k66></iframe> <!--  class=" aspect-video portrait:w-full landscape:md:h-[640px]  " --> <!-- CLose buttons --> <div class="fixed top-1 right-1 md:top-3 md:right-3 closeYouTubeModalX cursor-pointer" data-astro-cid-22xs7k66> <i class="fa fa-times fa-3x" data-astro-cid-22xs7k66></i> </div> <div class="fixed -bottom-8 left-1/2 transform -translate-x-1/2 -translate-y-1/2 closeYouTubeModalBottomButton" style="z-index: 100000000" data-astro-cid-22xs7k66> <button class="button !rounded-b-none closeYouTubeModal" data-astro-cid-22xs7k66>CLOSE</button> </div> </div>    <!-- When user scroll to this point the ScrollToArrow is shown --> <!-- <div id="showArrowScrollTrigger"></div> --> <!-- <div class="border-t border-slate-700 block md:hidden"></div> --> <div class="mx-3 lg:mx-10 my-4">  <header class="mb-10 3xl:max-w-screen-3xl mx-auto"> <nav> <div class="hamburger"> <div class=" flex justify-between items-center"> <div class="flex items-center gap-3"> <img src="/images/brand/laptop1.png" class="menu_logo" alt="logo" width="50" height="50" loading="lazy" decoding="async"> <a href="/" class="text-2xl sm:text-3xl mr-0 themetxt pt-1"><span class="font-thin">Fabio</span> <span class="font-extrabold">Biondi</span></a> </div> <div class="hamburger-button"> <span class="line"></span> <span class="line"></span> <span class="line"></span> </div> <!-- <div class="absolute bg-red-700 text-white text-sm font-bold text-center rotate-45 p-2 w-96 -right-40 top-4">BETA</div> --> </div> </div>   <div class="nav-links h-80 lg:h-24 flex items-center justify-between mx-10 collapsed transition-all !overflow-hidden"> <div class="flex flex-col lg:flex-row items-center justify-between w-full "> <a href="/" class="flex flex-col lg:flex-row items-center gap-x-2 !m-0 !p-0"> <div class="flex-none hidden lg:block"> <img src="/_astro/emote-laptop.DzezlRPj_Z2o140B.webp" class="menu_logo" alt="logo" width="100" height="100" loading="lazy" decoding="async"> </div> <div class=" text-2xl  lg:text-4xl hidden lg:block"> <span class="font-thin">FFFabio</span> <span class="font-extrabold">Biondi</span> </div> </a> <div class="flex flex-col lg:flex-row justify-between items-center gap-4"> <div class="flex flex-col lg:flex-row justify-center lg:justify-start "> <!-- <a href="/about/">About</a> --> <a class="menu_item block lg:hidden xl:block" href="/about/">About</a> <a class="menu_item" href="/blog/">Blog</a> <a class="menu_item" href="/tutorials/">Tutorials</a> <a class="menu_item" href="/video-courses/">🇮🇹 Video Courses</a> <!-- <a href="/tags/">Tags</a> --> </div> <div id="themeToggle" class="cursor-pointer " data-astro-cid-3vjzidht> <svg width="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-astro-cid-3vjzidht> <path class="sun" fill-rule="evenodd" d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zm0 1.5a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm12-7a.8.8 0 0 1-.8.8h-2.4a.8.8 0 0 1 0-1.6h2.4a.8.8 0 0 1 .8.8zM4 12a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1 0-1.6h2.5a.8.8 0 0 1 .8.8zm16.5-8.5a.8.8 0 0 1 0 1l-1.8 1.8a.8.8 0 0 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM6.3 17.7a.8.8 0 0 1 0 1l-1.7 1.8a.8.8 0 1 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM12 0a.8.8 0 0 1 .8.8v2.5a.8.8 0 0 1-1.6 0V.8A.8.8 0 0 1 12 0zm0 20a.8.8 0 0 1 .8.8v2.4a.8.8 0 0 1-1.6 0v-2.4a.8.8 0 0 1 .8-.8zM3.5 3.5a.8.8 0 0 1 1 0l1.8 1.8a.8.8 0 1 1-1 1L3.5 4.6a.8.8 0 0 1 0-1zm14.2 14.2a.8.8 0 0 1 1 0l1.8 1.7a.8.8 0 0 1-1 1l-1.8-1.7a.8.8 0 0 1 0-1z" data-astro-cid-3vjzidht></path> <path class="moon" fill-rule="evenodd" d="M16.5 6A10.5 10.5 0 0 1 4.7 16.4 8.5 8.5 0 1 0 16.4 4.7l.1 1.3zm-1.7-2a9 9 0 0 1 .2 2 9 9 0 0 1-11 8.8 9.4 9.4 0 0 1-.8-.3c-.4 0-.8.3-.7.7a10 10 0 0 0 .3.8 10 10 0 0 0 9.2 6 10 10 0 0 0 4-19.2 9.7 9.7 0 0 0-.9-.3c-.3-.1-.7.3-.6.7a9 9 0 0 1 .3.8z" data-astro-cid-3vjzidht></path> </svg> </div>   </div> </div> </div>  </nav> </header> </div> <div>  <div class="page 3xl:max-w-screen-3xl mx-auto"> <div id="tutorialHero" class="flex flex-col xl:flex-row mt-0 xl:mt-12 relative gap-x-16 gap-y-8"> <div class="absolute -top-10 left-0  blurFix blur-3xl w-full h-full opacity-20 pointer-events-none"> <img src="/_astro/image.VHOF0DkQ_Z1Hw4Mm.webp" class="w-full rounded-3xl" fit="cover" aspectRatio="1.3333333333333333" alt="Create a simple CRUD app" width="400" height="140" loading="lazy" decoding="async"> </div> <div class="w-full xl:w-2/3 text-center xl:text-start"> <h2 class="m-0 my-3 text-3xl xl:text-4xl 3xl:text-7xl font-thin themetxt">Angular 15</h2> <h2 class="m-0 text-3xl md:text-4xl lg:text-4xl xl:text-6xl 3xl:text-8xl font-extrabold themetxt">Error Handling &amp; Fix</h2> <p class="m-0 mt-3 text-normal sm:text-xl 3xl:text-2xl themetxt">In this part of the tutorial you will fix some UI problems and you will learn some tricks to handle HTTP errors by using <code>Promise</code>s and <code>Observable</code>s</p> <div class="flex justify-center xl:justify-start"> <div class="w-full max-w-3xl  bg-slate-900 text-primary-content mt-12 rounded-2xl p-4 text-lg"> <div class="flex flex-col sm:flex-row gap-2 sm:gap-8 "> <div class="w-full lg:w-1/2 flex flex-col gap-3 text-center"> <div class="text-slate-400">2022-12-28</div> <div class="text-white text-3xl font-bold">11 min read</div> <div class=""> <a href="/about"> <button class="btn btn-sm bg-sky-500 text-white">Fabio Biondi</button> </a> </div> </div> <div class="w-full lg:w-1/2 flex flex-col gap-0 sm:gap-3 text-center"> <div class="flex sm:flex-col justify-center items-center gap-3"> <div class="text-slate-400">Difficulty</div> <div class="text-3xl flex justify-center my-3 pb-4 sm:py-0"> <div class="relative w-32"> <div style="background-color:lightgreen;width:40%" class=" rounded-full  h-4 absolute top-0 left-0 z-10"></div> <div class="border border-slate-900 bg-slate-700 rounded-full h-4 w-full absolute top-0 left-0"></div> </div> <!-- 
<span class="flex gap-2 flex-wrap">
  <div>
  {
    [1,2,3,4,5].map((item, i) => 
      <i  class:list={['fa text-normal', {
        'fa-star': (i+1) <= value, 
        'fa-star-o': (i+1) > value
      }]}></i>)
  }
  </div>
</span> --> </div> </div> <div class="flex justify-center"> <span class="flex gap-2 flex-wrap my-2 text-black dark:text-white"> <!-- {
    tags.map((tag: string) => 
      <div class=" badge badge-outline px-4 p-2 md:badge-lg badge-sm md:py-4 md:px-8 no-underline">
        #{tag}
      </div>
      // <a 
      //   class="badge badge-outline px-4 p-2 md:badge-lg badge-sm md:py-4 md:px-8 no-underline"
      //   href={`/tags/${tag}`}
      // >
      //   #{tag}
      // </a>
    ) 
  }--> <div class="bg-slate-500 dark:bg-slate-700  text-white rounded-2xl px-2 py-1 shadow-lg  md:px-4 no-underline"> angular </div><div class="bg-slate-500 dark:bg-slate-700  text-white rounded-2xl px-2 py-1 shadow-lg  md:px-4 no-underline"> typescript </div> </span> </div> </div> </div> </div> </div> </div> <div class="flex justify-center xl:justify-end"> <div class="w-full"> <!-- 
        <div class="w-full max-w-xl  flex justify-center xl:justify-end order-first md:order-none">
          {
           
          }
        </div> --> <div class="w-full flex justify-center" data-astro-cid-lwd7ki6e> <div class="w-full text-center relative overflow-hidden " data-astro-cid-lwd7ki6e> <div class="absolute bg-sky-700 text-white font-bold -rotate-[24deg] p-1 w-96 -left-28 top-6 text-center" data-astro-cid-lwd7ki6e>
SERIES
</div> <div class="p-6 m-0 rounded-box w-full bg-slate-900" data-astro-cid-lwd7ki6e> <div class="flex flex-col gap-2" data-astro-cid-lwd7ki6e> <div class="flex  justify-center" data-astro-cid-lwd7ki6e> <img src="/_astro/image.VHOF0DkQ_Z1b9i7h.webp" alt="Create a simple CRUD app" fit="outside" aspectRatio="1" data-astro-cid-lwd7ki6e width="200" height="204" loading="lazy" decoding="async"></div> <span class="text-white text-3xl font-extrabold pb-3 pt-0" data-astro-cid-lwd7ki6e>Create a simple CRUD app</span> </div> <div class="steps steps-vertical " data-astro-cid-lwd7ki6e> <a href="/tutorials/angular/simple-crud-in-angular/1-create-an-angular-project" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Create a new project with the CLI </span> </a><a href="/tutorials/angular/simple-crud-in-angular/2-display-list" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Display a list of items in Angular </span> </a><a href="/tutorials/angular/simple-crud-in-angular/3-template-driven-forms" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Template Driven Forms and Validations </span> </a><a href="/tutorials/angular/simple-crud-in-angular/4-http-client-and-rest-api" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> HttpClient and REST API </span> </a><a href="/tutorials/angular/simple-crud-in-angular/5-angular-dependency-injection" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Dependency Injection </span> </a><a href="/tutorials/angular/simple-crud-in-angular/6-error-handling" style="text-align:left" class="step no-underline step-info pointer-events-none" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full text-info " data-astro-cid-lwd7ki6e> Error Handling &amp; Fix </span> </a><a href="/tutorials/angular/simple-crud-in-angular/7-challenges" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Challenges </span> </a> </div> </div> </div> </div>  </div> </div> </div> <!-- When user scroll to this point the ScrollToArrow is shown --> <!-- <div id="showArrowScrollTrigger"></div> --> <!-- <div class="border-t border-slate-700 block md:hidden"></div> --> </div> <div class="socialBarWrapper hidden 2xl:inline fixed top-1/2  -translate-y-1/2 -right-96 z-10 "> <div class="flex flex-col gap-5 bg-slate-900 rounded-tl-xl rounded-bl-xl p-3 w-16 justify-center items-center border border-r-0 border-slate-600" id="socialBar"> <div class="text-xs	text-slate-400 border-b border-slate-500 pb-3">SHARE</div> <div class="social-icon" data-name="linkedin"> <div class="text-white hover:text-pink-500 transition" aria-label="LinkedIn"> <i class="fa fa-2x fa-linkedin"></i> </div> </div><div class="social-icon" data-name="twitter"> <div class="text-white hover:text-pink-500 transition" aria-label="Twitter"> <i class="fa fa-2x fa-twitter"></i> </div> </div><div class="social-icon" data-name="facebook"> <div class="text-white hover:text-pink-500 transition" aria-label="Facebook"> <i class="fa fa-2x fa-facebook"></i> </div> </div><div class="social-icon" data-name="telegram"> <div class="text-white hover:text-pink-500 transition" aria-label="Telegram"> <i class="fa fa-2x fa-telegram"></i> </div> </div><div class="social-icon" data-name="whatsapp"> <div class="text-white hover:text-pink-500 transition" aria-label="Twitch"> <i class="fa fa-2x fa-whatsapp"></i> </div> </div> </div> </div>  <div class="page"> <div class="content mt-0 md:mt-3 xl:mt-36"> <h1 id="topics">TOPICS</h1>
<ul>
<li><a href="#fix-avoid-ui-reference-in-services">Fix: Avoid UI reference in services</a></li>
<li><a href="#what-is-the-problem">What is the problem?</a></li>
<li><a href="#solution-1-not-the-best-one-">Solution 1: not the best one 🤮</a></li>
<li><a href="#solution-2-use-promise">Solution 2: use <code>Promise</code></a></li>
<li><a href="#solution-3-rxjs-and-sharereplay">Solution 3: RxJS and <code>shareReplay</code></a></li>
</ul>
<h1 id="fix-avoid-ui-reference-in-services">Fix: Avoid UI reference in services</h1>
<p>The <code>saveHandler</code> method of <code>UsersService</code> class now receives a <code>NgForm</code> as argument.
However, it is preferable that the service has no references to  the UI because if we update it in the future, we won’t have to change the service as well.</p>
<p>So, open the service and update the current <code>saveHandler</code>, from the following:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>users.service.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(f: NgForm) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> user</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> f.value </span><span style="color:#F97583">as</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">;     </span><span style="color:#6A737D">// will be removed</span></span>
<span class="line"><span style="color:#79B8FF">  this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">&gt;(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/`</span><span style="color:#E1E4E8">, user)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">dbUser</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.users, dbUser];      </span></span>
<span class="line"><span style="color:#E1E4E8">      f.</span><span style="color:#B392F0">reset</span><span style="color:#E1E4E8">({ gender: </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8"> });                    </span><span style="color:#6A737D">// will be removed</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<p>To the following one.
In fact the method now receives the form value instead of <code>NgForm</code> and our service has no UI references anymore.</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>users.service.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(user: User) {</span></span>
<span class="line"><span style="color:#79B8FF">  this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">&gt;(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/`</span><span style="color:#E1E4E8">, user)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">dbUser</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.users, dbUser];</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-none border-2 border-slate-700 text-black dark:text-white"> <h1 class="text-xl xl:text-2xl font-extrabold mb-4">TypeScript TIP</h1> <div> <p>The <code>saveHandler</code> method won’t really receive an object typed as <code>User</code> but, in the next step, we’ll pass the <code>form.value</code> to it, that represents a “partial” version of the <code>User</code>.</p><p>In fact it should be set to <code>user: Partial&lt;User&gt;</code> instead but the type of <code>form.value</code> is <code>any</code> so it won’t generate compiler errors.</p><br/><p>Since I don’t want to complicate the tutorial further we’ll leave it at that.</p> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<p>However you’ll get this error:</p>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/image%20(21).fT14FBdk_10TtE0.webp" class="rounded-sm sm:rounded-2xl" alt="" width="600" height="543" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<p>Why?</p>
<p>Your component still pass the <code>NgForm</code> as paremeter to the service method so you need to update  your component HTML template.</p>
<p>So, we have to update the current code in which we pass the <code>NgForm instance</code> to the <code>saveHandler</code> method:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">(submit)=&quot;usersService.saveHandler(f)&quot;</span></span></code></pre> </div> </div>
<p>to the following one, in order to pass the form <code>value</code> (the form content) instead of the form reference:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">(submit)</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;usersService.saveHandler(f.value)&quot;</span></span></code></pre> </div> </div>
<h3 id="final-source-code">FINAL SOURCE CODE</h3>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>app.component.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { HttpClient } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/common/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NgForm } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/forms&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Component } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/core&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { User } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;./model/user&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { UsersService } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;./services/users.service&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Component</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  selector: </span><span style="color:#9ECBFF">&#39;app-root&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  template: </span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">    &lt;div class=&quot;container&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;h1&gt;Users&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">      &lt;form</span></span>
<span class="line"><span style="color:#9ECBFF">        class=&quot;card card-body mt-3&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        #f=&quot;ngForm&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        (submit)=&quot;usersService.saveHandler(f.value)&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">          &#39;male&#39;: f.value.gender === &#39;M&#39;,</span></span>
<span class="line"><span style="color:#9ECBFF">          &#39;female&#39;: f.value.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">        }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">      &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;input</span></span>
<span class="line"><span style="color:#9ECBFF">          type=&quot;text&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngModel]</span></span>
<span class="line"><span style="color:#9ECBFF">          name=&quot;label&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          placeholder=&quot;Add user name&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;form-control&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          required</span></span>
<span class="line"><span style="color:#9ECBFF">          #labelInput=&quot;ngModel&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{&#39;is-invalid&#39;: labelInput.invalid &amp;&amp; f.dirty}&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">        &lt;select</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngModel]</span></span>
<span class="line"><span style="color:#9ECBFF">          name=&quot;gender&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;form-control&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          required</span></span>
<span class="line"><span style="color:#9ECBFF">          #genderInput=&quot;ngModel&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{&#39;is-invalid&#39;: genderInput.invalid &amp;&amp; f.dirty}&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;&quot;&gt;Select option&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;M&quot;&gt;M&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;F&quot;&gt;F&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;/select&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">  </span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;button</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;btn&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [disabled]=&quot;f.invalid&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;btn-success&#39;: f.valid,</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;btn-danger&#39;: f.invalid</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;Save&lt;/button&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;/form&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">      &lt;hr&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">      &lt;ul class=&quot;list-group&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;li</span></span>
<span class="line"><span style="color:#9ECBFF">          *ngFor=&quot;let u of usersService.users&quot; class=&quot;list-group-item&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;male&#39;: u.gender === &#39;M&#39;, </span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;female&#39;: u.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;i</span></span>
<span class="line"><span style="color:#9ECBFF">            class=&quot;fa fa-3x&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">            [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;fa-mars&#39;: u.gender === &#39;M&#39;,</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;fa-venus&#39;: u.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          &gt;&lt;/i&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">          {{u.label}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">          &lt;i class=&quot;fa fa-trash fa-2x pull-right&quot; </span></span>
<span class="line"><span style="color:#9ECBFF">             (click)=&quot;usersService.deleteHandler(u)&quot;&gt;&lt;/i&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;/li&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  styles: [</span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">    .male { background-color: #36caff; }</span></span>
<span class="line"><span style="color:#9ECBFF">    .female { background-color: pink; }</span></span>
<span class="line"><span style="color:#9ECBFF">    .card { transition: all 0.5s }</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AppComponent</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">public</span><span style="color:#FFAB70"> usersService</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UsersService</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    usersService.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<h1 id="what-is-the-problem">What is the problem?</h1>
<p>The form is not cleaned anymore after adding a new user:</p>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/image%20(18).4sMky5RN_Z2emKBY.webp" class="rounded-sm sm:rounded-2xl" alt="" width="400" height="316" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<p>There are several solutions to solve this issue but since this is a beginner tutorial we’ll find an easy way to fix it.</p>
<h1 id="solution-1-not-the-best-one">Solution 1: not the best one 🤮</h1>
<p>First we avoid to directly invoke the <code>saveHandler</code> service method directly from the template:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span>❌  (submit)=&quot;usersService.saveHandler(f.value)&quot;</span></span></code></pre> </div> </div>
<p>and we invoke a method of <code>AppComponent</code> class instead, passing again the whole <code>NgForm</code> object:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">✅  (submit)</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;saveHandler(f)&quot;</span></span></code></pre> </div> </div>
<p>Create a new <code>saveHandler()</code> method in <code>app.component.ts</code> and reset the form after invoking the service method:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>app.component.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AppComponent</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">public</span><span style="color:#FFAB70"> usersService</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UsersService</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    usersService.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // NEW</span></span>
<span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">form</span><span style="color:#F97583">:</span><span style="color:#B392F0"> NgForm</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // invoke the saveHandler method of the service</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.usersService.</span><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(form.value);</span></span>
<span class="line"><span style="color:#6A737D">    // NEW: Reset the form</span></span>
<span class="line"><span style="color:#E1E4E8">    form.</span><span style="color:#B392F0">reset</span><span style="color:#E1E4E8">({ gender: </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8"> })</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-slate-50">  <div> <p>Be sure to import <code>NgForm</code> and <code>User</code> in <code>AppComponent</code>:</p><!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NgForm } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/forms&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { User } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;./model/user&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">// ...</span></span></code></pre> </div> </div> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-slate-50">  <div> <p>Now your app should work again but it’s not the great solution.</p><p>In fact the form is cleaned even when your REST API returns some errors when adding a new user, and it’s not the right behavior.</p><p><strong>The form should be cleaned only when server returns a valid response.</strong></p><div class="flex w-full p-0 sm:p-6  justify-center"><img src="/_astro/2022-11-30_01-21-29%20(1).r2mmkosC_2qS9Ap.webp" class="rounded-sm sm:rounded-2xl" alt="" width="400" height="320" loading="lazy" decoding="async"></div> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<h1 id="solution-2-use-promise">Solution 2: use <code>Promise</code></h1>
<p>Our goal is cleaning the form after the HTTP requests are successfully done but only the service currently know when it happens.</p>
<p><strong>So, how can we notify the component that we need to clean the form at a certain moment?</strong></p>
<p>We can use a JavaScript concept knows as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p>
<p>Open <code>UsersService</code>, wrap all the <code>saveHandler</code> content into a <code>Promise</code> and return it:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>services/users.service.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(user: User): </span><span style="color:#79B8FF">Promise</span><span style="color:#F97583">&lt;void&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // return a new promise</span></span>
<span class="line"><span style="color:#E1E4E8">    return new </span><span style="color:#B392F0">Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">      this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">http</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">&gt;(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/`</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">user</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#6A737D">          // success</span></span>
<span class="line"><span style="color:#B392F0">          next</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">newUser</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">            this</span><span style="color:#E1E4E8">.</span><span style="color:#FFAB70">users</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.users, newUser];</span></span>
<span class="line"><span style="color:#6A737D">            // nofity the promise has successfully resolved</span></span>
<span class="line"><span style="color:#B392F0">            resolve</span><span style="color:#E1E4E8">(); </span></span>
<span class="line"><span style="color:#E1E4E8">          },</span></span>
<span class="line"><span style="color:#6A737D">          // fail</span></span>
<span class="line"><span style="color:#B392F0">          error</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">            // notify the operation has failed and send an error message</span></span>
<span class="line"><span style="color:#B392F0">            reject</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;server side error!&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">          }</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre> </div> </div>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-slate-50"> <h1 class="text-xl xl:text-2xl font-extrabold mb-4">RXJS Observer</h1> <div> <p>Since this time we also want to handle HTTP errors, we now pass an object (aka “Observer”) to the <code>subscribe</code> function of the <code>HttpClient</code> request.</p><p>This object we’ll invoke the function defined in the <code>next</code> property if it is resolved successfully, otherwise it invoke the <code>error</code> function.</p> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<p>Thanks to this approach we can now invoke the <code>saveHandler</code> method in the class component and wait for the result (success or failed)</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.usersService.</span><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(form.value)</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">( () </span><span style="color:#F97583">=&gt;</span><span style="color:#6A737D"> /* do something */</span><span style="color:#E1E4E8"> )    </span><span style="color:#6A737D">// success</span></span>
<span class="line"><span style="color:#E1E4E8">  .</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#6A737D"> /* do something */</span><span style="color:#E1E4E8">);    </span><span style="color:#6A737D">// error</span></span></code></pre> </div> </div>
<p>We can now open <code>AppComponent</code>, handle the promise in the <code>saveHandler()</code> method and finally reset the form when the HTTP request are successfully completed:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>app.component.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AppComponent</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // NEW</span></span>
<span class="line"><span style="color:#FFAB70">  error</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">public</span><span style="color:#FFAB70"> usersService</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UsersService</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    usersService.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">form</span><span style="color:#F97583">:</span><span style="color:#B392F0"> NgForm</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // NEW</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.usersService.</span><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(form.value </span><span style="color:#F97583">as</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">        // reset form</span></span>
<span class="line"><span style="color:#E1E4E8">        form.</span><span style="color:#B392F0">reset</span><span style="color:#E1E4E8">({ gender: </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#6A737D">        // clean previous errors</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">err</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">        // save error message to a new `error` class property</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> err;</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<p>Now we can use the <code>error</code> property to display the error message in HTML template:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12">  <div class="px-3 lg:px-5 py-6 rounded-b-xl rounded-t-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;container&quot;</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  &lt;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;alert alert-danger&quot;</span><span style="color:#B392F0"> *ngIf</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;error&quot;</span><span style="color:#E1E4E8">&gt;Server side error&lt;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#6A737D">  &lt;!-- missing part --&gt;</span></span></code></pre> </div> </div>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-none border-2 border-slate-700 text-black dark:text-white">  <div> <p>We may also display the error message contained in the <code>error</code> property instead</p> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<h2 id="dev-tools-tip--simulate-offline--networks">Dev Tools Tip:  simulate offline  networks</h2>
<p>How to check if the  “error”  is shown?</p>
<ol>
<li>Load the app: users should be displayed.</li>
<li>Open your “Browser Network DevTools” and set your application as ‘offline’</li>
</ol>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/2022-11-30_01-28-34%20(1).2q8DYThE_2wl0ti.webp" class="rounded-sm sm:rounded-2xl" alt="" width="500" height="240" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<p>Now add a new user: the operation fails and the error should be displayed just above the form:</p>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/2022-11-30_01-29-59%20(1).iGSNS_1r_Z1mFxLz.webp" class="rounded-sm sm:rounded-2xl" alt="" width="500" height="509" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<h3 id="how-to-check-if-the--success-operation-work">How to check if the  “success” operation work?</h3>
<ol>
<li>Re-open Network DevTool and set the application online: <code>No throttling</code></li>
<li>Add a new user</li>
<li>Error should now be hidden and the form has been reset.</li>
</ol>
<h4 id="result">Result:</h4>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/2022-11-30_01-32-23%20(1).8yI3CSYR_Z1omIKU.webp" class="rounded-sm sm:rounded-2xl" alt="" width="500" height="430" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<h3 id="final-source-code-1">FINAL SOURCE CODE</h3>
<p>There are better solutions to solve this issue but, at least, now it works fine :)</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>app.component.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { HttpClient } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/common/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Component } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/core&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NgForm } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/forms&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { User } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;./model/user&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { UsersService } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;./services/users.service&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Component</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  selector: </span><span style="color:#9ECBFF">&#39;app-root&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  template: </span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">    &lt;div class=&quot;container&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;h1&gt;Users&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;div class=&quot;alert alert-danger&quot; *ngIf=&quot;error&quot;&gt;Server side error&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;form</span></span>
<span class="line"><span style="color:#9ECBFF">        class=&quot;card card-body mt-3&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        #f=&quot;ngForm&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        (submit)=&quot;saveHandler(f)&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">          &#39;male&#39;: f.value.gender === &#39;M&#39;,</span></span>
<span class="line"><span style="color:#9ECBFF">          &#39;female&#39;: f.value.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">        }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">      &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;input</span></span>
<span class="line"><span style="color:#9ECBFF">          type=&quot;text&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngModel]</span></span>
<span class="line"><span style="color:#9ECBFF">          name=&quot;label&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          placeholder=&quot;Add user name&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;form-control&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          required</span></span>
<span class="line"><span style="color:#9ECBFF">          #labelInput=&quot;ngModel&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{&#39;is-invalid&#39;: labelInput.invalid &amp;&amp; f.dirty}&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">        &lt;select</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngModel]</span></span>
<span class="line"><span style="color:#9ECBFF">          name=&quot;gender&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;form-control&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          required</span></span>
<span class="line"><span style="color:#9ECBFF">          #genderInput=&quot;ngModel&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{&#39;is-invalid&#39;: genderInput.invalid &amp;&amp; f.dirty}&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;&quot;&gt;Select option&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;M&quot;&gt;M&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;option value=&quot;F&quot;&gt;F&lt;/option&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;/select&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">  </span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;button</span></span>
<span class="line"><span style="color:#9ECBFF">          class=&quot;btn&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [disabled]=&quot;f.invalid&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;btn-success&#39;: f.valid,</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;btn-danger&#39;: f.invalid</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;Save&lt;/button&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;/form&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">      &lt;hr&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">      &lt;ul class=&quot;list-group&quot;&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;li</span></span>
<span class="line"><span style="color:#9ECBFF">          *ngFor=&quot;let u of usersService.users&quot; class=&quot;list-group-item&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;male&#39;: u.gender === &#39;M&#39;, </span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;female&#39;: u.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">        &gt;</span></span>
<span class="line"><span style="color:#9ECBFF">          &lt;i</span></span>
<span class="line"><span style="color:#9ECBFF">            class=&quot;fa fa-3x&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">            [ngClass]=&quot;{</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;fa-mars&#39;: u.gender === &#39;M&#39;,</span></span>
<span class="line"><span style="color:#9ECBFF">            &#39;fa-venus&#39;: u.gender === &#39;F&#39;</span></span>
<span class="line"><span style="color:#9ECBFF">          }&quot;</span></span>
<span class="line"><span style="color:#9ECBFF">          &gt;&lt;/i&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">          {{u.label}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">          &lt;i class=&quot;fa fa-trash fa-2x pull-right&quot; </span></span>
<span class="line"><span style="color:#9ECBFF">             (click)=&quot;usersService.deleteHandler(u)&quot;&gt;&lt;/i&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">        &lt;/li&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">      &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  styles: [</span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">    .male { background-color: #36caff; }</span></span>
<span class="line"><span style="color:#9ECBFF">    .female { background-color: pink; }</span></span>
<span class="line"><span style="color:#9ECBFF">    .card { transition: all 0.5s }</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AppComponent</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  error</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">public</span><span style="color:#FFAB70"> usersService</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UsersService</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    usersService.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">form</span><span style="color:#F97583">:</span><span style="color:#B392F0"> NgForm</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.usersService.</span><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(form.value </span><span style="color:#F97583">as</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        form.</span><span style="color:#B392F0">reset</span><span style="color:#E1E4E8">({ gender: </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">err</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> err);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre> </div> </div>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>/services/users.service.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { HttpClient } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/common/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Injectable } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;@angular/core&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { User } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;../model/user&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#B392F0">Injectable</span><span style="color:#E1E4E8">({ providedIn: </span><span style="color:#9ECBFF">&#39;root&#39;</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> UsersService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  users</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">[] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"><span style="color:#FFAB70">  URL</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> &#39;http://localhost:3000&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">private</span><span style="color:#FFAB70"> http</span><span style="color:#F97583">:</span><span style="color:#B392F0"> HttpClient</span><span style="color:#E1E4E8">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  init</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">[]&gt;(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">URL</span><span style="color:#F97583"> +</span><span style="color:#9ECBFF"> &#39;/users&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">res</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> res;</span></span>
<span class="line"><span style="color:#E1E4E8">      });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  deleteHandler</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">userToRemove</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">delete</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/${</span><span style="color:#E1E4E8">userToRemove</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">id</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.users.</span><span style="color:#B392F0">filter</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">u</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> u.id </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> userToRemove.id);</span></span>
<span class="line"><span style="color:#E1E4E8">      });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&lt;</span><span style="color:#79B8FF">void</span><span style="color:#E1E4E8">&gt; {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#F97583"> new</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">resolve</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">reject</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">&gt;(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/`</span><span style="color:#E1E4E8">, user)</span></span>
<span class="line"><span style="color:#E1E4E8">        .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#B392F0">          next</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">newUser</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">            this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.users, newUser];</span></span>
<span class="line"><span style="color:#B392F0">            resolve</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">          },</span></span>
<span class="line"><span style="color:#B392F0">          error</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=&gt;</span><span style="color:#B392F0"> reject</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;server side error!&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre> </div> </div>
<h1 id="solution-3-rxjs-and-sharereplay">Solution 3: RxJS and <code>shareReplay</code></h1>
<p>Another interesting alternative way to fix the same problem is by using RxJS only.</p>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-none border-2 border-red-400 text-black dark:text-white"> <h1 class="text-xl xl:text-2xl font-extrabold mb-4">ALERT</h1> <div> <p>Don’t worry if you don’t completely understand the next example.
It’s tricky if you’ve never used reactive programming and RxJS.</p> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<p>We can update <code>saveHandler</code> in <code>users.service.ts</code> just as shown below:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>/services/users.service.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(user: User) {</span></span>
<span class="line"><span style="color:#6A737D">  // Save the HttpClient request </span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> usersReq$</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.http.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">&gt;(</span><span style="color:#9ECBFF">`${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">URL</span><span style="color:#9ECBFF">}/users/`</span><span style="color:#E1E4E8">, user)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">pipe</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">shareReplay</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // subscribe the HttpClient request and add the new user to the array</span></span>
<span class="line"><span style="color:#6A737D">  // when the HTTP request is successfully completed</span></span>
<span class="line"><span style="color:#E1E4E8">  usersReq$.</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">newUser</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.users </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.users, newUser];</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // return the Observable</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> usersReq$;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </div> </div>
<p>Update <code>app.component</code>:</p>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-1 h-12"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="Angular" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="TypeScript" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2"><code>app-component.ts</code></div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#B392F0">  saveHandler</span><span style="color:#E1E4E8">(form: NgForm) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.usersService.</span><span style="color:#B392F0">saveHandler</span><span style="color:#E1E4E8">(form.value </span><span style="color:#F97583">as</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">subscribe</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#B392F0">        next</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">          form.</span><span style="color:#B392F0">reset</span><span style="color:#E1E4E8">({ gender: </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#79B8FF">          this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#B392F0">        error</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">          this</span><span style="color:#E1E4E8">.error </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &#39;Some errors here! 😅&#39;</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre> </div> </div>
<div class="hint rounded-xl p-5 text-black px-10 xl:px-16 relative mt-20 mb-24 bg-slate-50"> <h1 class="text-xl xl:text-2xl font-extrabold mb-4">WHY shareReplay?</h1> <div> <p>We have used the <code>shareReplay</code> RxJS operator because we want to subscribe the <code>users$</code> observable in both, the service and the component.
Since all the observable are COLD by default (it means that every subscribe generates a new execution of the observable),
the REST API will be invoked twice if we subcribe the <code>HttpClient</code> in the service and in the component.</p><p>So we use the <code>shareReplay</code> operator in order to share and replay the emission of the value generated by the <code>HttpClient</code> avoiding the double request.</p><br/><p><strong>Don’t worry if this process is not clear. RxJS is not so easy to understand</strong></p><br/><p>Resources:</p><ul>
<li><a href="https://rxjs.dev/">RxJS Documentation</a></li>
<li><a href="https://www.learnrxjs.io/">LearnRxJs.io</a></li>
</ul> </div> <img src="/_astro/emote-opla_right.U6-1sQxd_2g61Jt.webp" class="absolute -left-5 -top-4 xl:-left-14 xl:-top-10 w-16 xl:w-28" alt="" fit="outside" aspectRatio="1" width="120" height="120" loading="lazy" decoding="async"> </div> 
<p>The result is the same as before:</p>
<div class="mockup-window border !my-12 border-slate-700 dark:border-base-700 "> <div class="flex justify-center px-4 py-8 border-t border-slate-700 dark:border-base-700  bg-slate-900"> <div class="flex flex-col gap-4 w-full"> <div class=" my-3     w-full"><div class="flex w-full p-1 sm:p-6  justify-center"><div class="relative"><div class="z-20 relative"><img src="/_astro/2022-11-30_01-21-29%20(1).r2mmkosC_2qS9Ap.webp" class="rounded-sm sm:rounded-2xl" alt="" width="400" height="320" loading="lazy" decoding="async"></div><div class="z-0 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div></div></div></div> </div> </div> </div>
<div class="divider !sm:mx-32 sm:px-32 sm:mt-12  text-slate-500 before:!bg-slate-500 after:bg-slate-500">WHAT’S NEXT</div>
<p>That’s all. You have completed this tutorial but you can try to solve the next challenges to prove yourself or learn something new.</p>
<div class="w-full flex justify-center" data-astro-cid-lwd7ki6e> <div class="w-full text-center relative overflow-hidden " data-astro-cid-lwd7ki6e> <div class="absolute bg-sky-700 text-white font-bold -rotate-[24deg] p-1 w-96 -left-28 top-6 text-center" data-astro-cid-lwd7ki6e>
SERIES
</div> <div class="p-6 m-0 rounded-box w-full bg-slate-900" data-astro-cid-lwd7ki6e> <div class="flex flex-col gap-2" data-astro-cid-lwd7ki6e> <div class="flex  justify-center" data-astro-cid-lwd7ki6e> </div> <span class="text-white text-3xl font-extrabold pb-3 pt-0" data-astro-cid-lwd7ki6e>Create a simple CRUD app</span> </div> <div class="steps steps-vertical " data-astro-cid-lwd7ki6e> <a href="/tutorials/angular/simple-crud-in-angular/1-create-an-angular-project" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Create a new project with the CLI </span> </a><a href="/tutorials/angular/simple-crud-in-angular/2-display-list" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Display a list of items in Angular </span> </a><a href="/tutorials/angular/simple-crud-in-angular/3-template-driven-forms" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Template Driven Forms and Validations </span> </a><a href="/tutorials/angular/simple-crud-in-angular/4-http-client-and-rest-api" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> HttpClient and REST API </span> </a><a href="/tutorials/angular/simple-crud-in-angular/5-angular-dependency-injection" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Dependency Injection </span> </a><a href="/tutorials/angular/simple-crud-in-angular/6-error-handling" style="text-align:left" class="step no-underline step-info pointer-events-none" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full text-info " data-astro-cid-lwd7ki6e> Error Handling &amp; Fix </span> </a><a href="/tutorials/angular/simple-crud-in-angular/7-challenges" style="text-align:left" class="step no-underline" data-astro-cid-lwd7ki6e> <span class="text-white hover:text-sky-500 w-full" data-astro-cid-lwd7ki6e> Challenges </span> </a> </div> </div> </div> </div> 
<br/>
<!-- <div class="mt-4 mb-12 relative">
  <div class="mockup-code !rounded-b-none " style="background-color: #0d1117"></div>
  <div  style="background-color: #0d1117">
    <div class="px-5">
      <slot />
    </div>
  </div>
  <div class="p-4 rounded-b-2xl  shadow-slate-900 shadow-md "  style="background-color: #0d1117"></div>
</div> --><div class="relative border-2 border-slate-700 rounded-2xl mt-4 mb-12"> <div class="flex items-center gap-1 px-3 py-2"> <img src="/_astro/angular.EFyfN8Rq_ARapj.webp" alt="ADS: MY LATEST VIDEO COURSE <br />(italian only)" aspectRatio="1" width="24" height="24" loading="lazy" decoding="async"><img src="/_astro/ts.Rgm_W9yq_Z1Rfk8H.webp" alt="ADS: MY LATEST VIDEO COURSE <br />(italian only)" aspectRatio="1" width="24" height="24" loading="lazy" decoding="async"> <div class="ml-2 ">ADS: MY LATEST VIDEO COURSE <br />(italian only)</div> </div> <div class="px-3 lg:px-5 py-6 rounded-b-xl" style="background-color: #0d1117"> <a href="/video-courses/angular-reactive-forms" class="flex justify-center"> <img src="/images/banners/banner1.png" class="rounded-sm sm:rounded-2xl" alt="Nuovo Corso" width="507" height="582" loading="lazy" decoding="async"> </a> </div> </div>
<br/> </div> <!--
    <div class="my-12">
      <Toggle title="Write a Comment">
        <Disqus slug={frontmatter.slug} />
      </Toggle>
    </div>
    --> </div> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var l=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value=="object"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let a of e)if(a.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=l;window.dispatchEvent(new Event("astro:visible"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="121MtI" prefix="r0" component-url="/_astro/NewsLetterPanel.Qi5s216h.js" component-export="default" renderer-url="/_astro/client.olTvLX7Y.js" props="{&quot;newsListId&quot;:[0,&quot;0817a264-d1bf-47a3-ae83-d39fd2bd3489&quot;],&quot;promoListId&quot;:[0,&quot;b2c160b2-e01d-4a2a-984f-2f96f3c12cd5&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;NewsLetterPanel&quot;,&quot;value&quot;:true}" await-children=""><div class="bg-slate-700 text-center border-b border-b-slate-800" id="newsletterBox"><div class="page !py-16 "><div class="flex justify-center"><img src="./images/brand/emote-newsletter-low.png" alt=""/></div><div class="my-4 text-gray-400"><div class="text-xl sm:text-3xl">Keep updated about latest content</div><div class="text-xl sm:text-lg">videos, articles, tips and news</div></div><form class="mt-4 mb-2 sm:flex justify-center"><div class="form-control"><div class="sm:input-group sm:input-group-y"><input name="email" type="email" placeholder="Your Email Address" class=" input input-bordered rounded-2xl sm:!rounded-l-2xl text-black bg-white w-full mb-3 sm:mb-0 sm:w-96" value=""/><button class="btn  !rounded-2xl sm:!rounded-l-none !rounded-r-2xl  !bg-sky-400 opacity-40 hover:bg-sky-700 !text-gray-900 hover:text-sky-900" type="submit" disabled="">SUBSCRIBE</button></div></div></form><div class="flex flex-col justify-center items-start gap-1 w-full sm:w-96 mx-auto"><div class="form-control "><label class="cursor-pointer label gap-3"><input type="checkbox" class="checkbox checkbox-info" name="hasSelectedPromoList"/><span class="text-white text-left"><span>I also want to receive info about Premium content, promo, courses </span></span></label></div><div class="form-control "><label class="cursor-pointer label gap-3 relative"><input type="checkbox" class="checkbox checkbox-success" name="privacyConfirm"/><span class="text-white"><span class="hidden sm:inline">I have read the </span><a href="/privacy-policy" target="_blank" class="text-sky-500 hover:!text-sky-400">privacy policy</a></span></label></div></div></div></div><!--astro:end--></astro-island>   <div class="fixed z-10 bg-red-700 text-white text-sm font-bold text-center rotate-45 p-2 w-96 -left-40 bottom-4" data-astro-cid-ofitbb36>BETA</div> <div class="footer p-10 relative" data-astro-cid-ofitbb36> <div class="mx-auto gap-x-32 gap-y-8 flex flex-col lg:flex-row justify-center" data-astro-cid-ofitbb36> <div data-astro-cid-ofitbb36> <div class="footer-title pb-1" data-astro-cid-ofitbb36>ABOUT ME </div> <div data-astro-cid-ofitbb36> <i class="fa fa-info-circle w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="Visit the Profile Page" href="/about" data-astro-cid-ofitbb36>About Page</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-youtube w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Facebook Profile" href="https://www.youtube.com/c/FabioBiondi" data-astro-cid-ofitbb36>YouTube</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-linkedin w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the LinkedIn Profile" href="https://www.linkedin.com/in/fabiobiondi/" data-astro-cid-ofitbb36>LinkedIn</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-twitch w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Twitch Channel" href="https://www.twitch.tv/fabio_biondi" data-astro-cid-ofitbb36>Twitch</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-telegram w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Telegram Page" href="https://t.me/fabiobiondi" data-astro-cid-ofitbb36>Telegram Page</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-instagram w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Instagram Page" href="https://www.instagram.com/biondifabio/" data-astro-cid-ofitbb36>Instagram</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-facebook w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Facebook Page" href="https://www.facebook.com/groups/fabiobiondi.training" data-astro-cid-ofitbb36>Facebook Group</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-twitter w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Twitter Profile" href="https://twitter.com/biondifabio" data-astro-cid-ofitbb36>Twitter</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-bookmark w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" rel="noopener" aria-label="Visit the Dev.to Profile" href="https://dev.to/fabiobiondi" data-astro-cid-ofitbb36>Dev.To</a> </div> </div> <div data-astro-cid-ofitbb36> <div class="footer-title pb-1" data-astro-cid-ofitbb36>Communities</div> <div data-astro-cid-ofitbb36> <i class="fa fa-telegram w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" aria-label="Join WeAreDevs Community" href="https://t.me/we_are_devs" data-astro-cid-ofitbb36>We Are Devs</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-facebook w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" aria-label="Join Angular Community" href="https://www.facebook.com/groups/angularjs.developer.italiani" data-astro-cid-ofitbb36>Angular</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-facebook w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" aria-label="Join React Community" href="https://www.facebook.com/groups/react.developer.italiani" data-astro-cid-ofitbb36>React</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-facebook w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" aria-label="Join JavaScript Community" href="https://www.facebook.com/groups/javascript.developer.italiani" data-astro-cid-ofitbb36>JavaScript</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-facebook w-4 text-center" data-astro-cid-ofitbb36></i> <a target="_blank" aria-label="Join Opportunities Community" href="https://www.facebook.com/groups/opportunita.developer.italiani" data-astro-cid-ofitbb36>Opportunities</a> </div> </div> <div data-astro-cid-ofitbb36> <div class="footer-title pb-1" data-astro-cid-ofitbb36>PRODUCTS</div> <div data-astro-cid-ofitbb36> <i class="fa fa-book w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="Visit Training Page" href="https://formazione.fabiobiondi.io/" target="_blank" rel="noopener" data-astro-cid-ofitbb36>Front-End Training (ita)</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-video-camera w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="Visit Video Courses Page" href="/video-courses" data-astro-cid-ofitbb36>Video Courses (ita)</a> </div> <!-- <div>
        <i class="fa fa-graduation-cap"></i>
        <a aria-label="Visit Academy Profile" href="https://academy.talent-factory.it/" target="_blank" rel="noopener">Angular / React Academies</a> 
      </div> --> <div class="footer-title pb-1 pt-4" data-astro-cid-ofitbb36>SECTIONS</div> <div data-astro-cid-ofitbb36> <i class="fa fa-code w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="Blog" href="/blog" rel="noopener" data-astro-cid-ofitbb36>Blog</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-graduation-cap w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="Tutorials" href="/tutorials" rel="noopener" data-astro-cid-ofitbb36>Tutorials</a> </div> <div data-astro-cid-ofitbb36> <i class="fa fa-user w-4 text-center" data-astro-cid-ofitbb36></i> <a aria-label="About" href="/about" rel="noopener" data-astro-cid-ofitbb36>About</a> </div> </div> <div class="flex flex-col gap-3 justify-center" data-astro-cid-ofitbb36> <div data-astro-cid-ofitbb36> <img src="/_astro/emote-opla._CelARBT_Z1afxD6.webp" class="w-full text-center" aspectRatio="1" alt="logo" data-astro-cid-ofitbb36 width="140" height="140" loading="lazy" decoding="async"> </div> <div class="w-full text-center" data-astro-cid-ofitbb36> <div data-astro-cid-ofitbb36> 2023 Fabio Biondi | P.I. 01116230317 </div> <div data-astro-cid-ofitbb36> <a href="/privacy-policy" data-astro-cid-ofitbb36>Privacy Policy</a> | <a href="/cookie-policy" data-astro-cid-ofitbb36>Cookie Policy</a> </div> </div> </div> </div> <div id="scrollArrowbottom" class="absolute right-6 bottom-16 text-xl lg:text-2xl" data-astro-cid-ofitbb36> <i class="fa fa-arrow-up cursor-pointer	" data-astro-cid-ofitbb36></i> </div> </div>   <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">   <!-- Matomo -->  <!-- End Matomo Code --> <!-- End Matomo Code --> <!-- COOKIE IUBENDA --> <script type="text/javascript">
        var _iub = _iub || [];
        _iub.csConfiguration = {
          askConsentAtCookiePolicyUpdate: true,
          ccpaAcknowledgeOnDisplay: true,
          consentOnContinuedBrowsing: false,
          countryDetection: true,
          enableCcpa: true,
          enableLgpd: true,
          floatingPreferencesButtonDisplay: "bottom-right",
          invalidateConsentWithoutLog: true,
          lang: "en",
          lgpdAppliesGlobally: false,
          perPurposeConsent: true,
          siteId: 2903640,
          whitelabel: false,
          cookiePolicyId: 19604960,
          banner: {
            acceptButtonDisplay: true,
            closeButtonDisplay: false,
            customizeButtonDisplay: true,
            explicitWithdrawal: true,
            listPurposes: true,
            position: "bottom",
            rejectButtonDisplay: true,
          },
        };
      </script> <script type="text/javascript" src="//cdn.iubenda.com/cs/ccpa/stub.js"></script> <script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script> </div>  </body></html>