import{j as e}from"./jsx-runtime.9YwcPWTT.js";import{r as i}from"./index.LFf77hJu.js";import{c as C}from"./clsx.Zbgk8kpT.js";const E=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,16})+$/,I={email:"",privacyConfirm:!1,hasSelectedPromoList:!1};function T(g){const{newsListId:y,promoListId:j}=g,[t,u]=i.useState(I),[o,f]=i.useState(!1),[x,c]=i.useState(!1),[s,d]=i.useState(!1),[v,r]=i.useState(!1);function w(a){c(!0),d(!1),r(!1),a.preventDefault();const m=[y];t.hasSelectedPromoList&&m.push(j),fetch("https://fabiobiondi-newsletter.azurewebsites.net/api/fabiobiondi-newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({privacy:!0,email:t.email,listIds:m})}).then(l=>l.json()).then(l=>{l.ok||(d(!1),c(!1),r(!0)),u(k=>({...k,email:"Subscribed Successfully"})),d(!0),r(!1),c(!1),console.log("done",l)}).catch(l=>{setTimeout(()=>{d(!1),c(!1),r(!0)},1e3)})}function N(a){u({...t,[a.currentTarget.name]:a.currentTarget.value}),f(!0),r(!1)}const p=t.email.match(E);t.hasSelectedPromoList;const h=t.privacyConfirm,n=p&&h;function b(a){const m=a.currentTarget.name;u({...t,[m]:a.currentTarget.checked}),f(!0)}function S(){return o?s?"SUBSCRIBED":x?"loading...":p?h?"SUBSCRIBE":"ACCEPT PRIVACY":"INVALID EMAIL":"SUBSCRIBE"}return e.jsx("div",{className:"bg-slate-700 text-center border-b border-b-slate-800",id:"newsletterBox",children:e.jsxs("div",{className:"page !py-16 ",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"./images/brand/emote-newsletter-low.png",alt:""})}),e.jsxs("div",{className:"my-4 text-gray-400",children:[e.jsx("div",{className:"text-xl sm:text-3xl",children:"Keep updated about latest content"}),e.jsx("div",{className:"text-xl sm:text-lg",children:"videos, articles, tips and news"})]}),v&&e.jsx("div",{children:"Some error occurs. Try later"}),e.jsx("form",{className:"mt-4 mb-2 sm:flex justify-center",onSubmit:w,children:e.jsx("div",{className:"form-control",children:e.jsxs("div",{className:"sm:input-group sm:input-group-y",children:[e.jsx("input",{name:"email",value:t.email,onChange:N,type:"email",readOnly:s,placeholder:"Your Email Address",className:" input input-bordered rounded-2xl sm:!rounded-l-2xl text-black bg-white w-full mb-3 sm:mb-0 sm:w-96"}),e.jsx("button",{className:C("btn  !rounded-2xl sm:!rounded-l-none !rounded-r-2xl ",{"!bg-sky-400 opacity-40 hover:bg-sky-700 !text-gray-900 hover:text-sky-900":!n&&!o},{"!bg-red-500 !text-white opacity-50 cursor-not-allowed":!n&&!s&&o},{"disabled:!bg-orange-100 disabled:!text-orange-700":n&&x},{"!bg-green-600 !text-white hover:bg-green-500":n&&!s},{"disabled:!bg-green-100 disabled:!text-green-700":s}),type:"submit",disabled:!n||s||x,children:S()})]})})}),e.jsxs("div",{className:"flex flex-col justify-center items-start gap-1 w-full sm:w-96 mx-auto",children:[e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"cursor-pointer label gap-3",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-info",checked:t.hasSelectedPromoList,name:"hasSelectedPromoList",onChange:b,disabled:s,readOnly:s}),e.jsx("span",{className:"text-white text-left",children:e.jsx("span",{children:"I also want to receive info about Premium content, promo, courses "})})]})}),e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"cursor-pointer label gap-3 relative",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-success",name:"privacyConfirm",checked:t.privacyConfirm,onChange:b,disabled:s,readOnly:s}),!h&&o&&e.jsx("i",{className:"mt-1 ml-2 fa fa-arrow-up animate-bounce dark:text-white text-xl absolute top-9 left-0 "}),e.jsxs("span",{className:"text-white",children:[e.jsx("span",{className:"hidden sm:inline",children:"I have read the "}),e.jsx("a",{href:"/privacy-policy",target:"_blank",className:"text-sky-500 hover:!text-sky-400",children:"privacy policy"})]})]})})]})]})})}export{T as default};
