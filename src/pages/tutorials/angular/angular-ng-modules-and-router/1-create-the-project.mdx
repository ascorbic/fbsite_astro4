---
layout: ../../../../layouts/TutorialPageLayout.astro
slug: angular/angular-ng-modules-and-router
route: '1-create-the-project'
title: Create an application with ngModules and nested routes
title1: Angular 15
title2: Create an application with ngModules and nested routes
author: ['Fabio Biondi']
description: In this step-by-step tutorial you will learn how to create a multiview application using Angular 15, with custom <code>ngModules</code> (core, feature and shared), lazy loading, primary and nested routes
image: 
  blur: 'angular/angular-ng-modules-and-router/image.png'
  url: null
  alt: Create a simple CRUD app
  series: 'angular/angular-ng-modules-and-router/image.png'
pubDate: 2022-02-25
tags: ["angular", "typescript"] 
series: 
  name: "Create an Angular app with ngModules"
  idx: 1
difficulty: 1
---

import { Image } from 'astro:assets';

import * as ReactDOMServer from 'react-dom/server';
// import Example1 from './demo/Example1';
import Img from '@widgets/Image.astro';
import ImageCarousel from '@widgets/ImageCarousel.astro';
import HDivider from '@widgets/HDivider.astro';
import IFrame from '@widgets/IFrame.astro'; 
import Key from '@widgets/Key.astro';
import Code from '@widgets/Code.astro';
import Phone from '@widgets/Phone.astro';
import DesktopWindow from '@widgets/DesktopWindow.astro';
import Hero from '@widgets/PostHero.astro';
import TutorialSeries from '@widgets/TutorialSeries.astro';
import Hint from '@widgets/Hint.astro';
import BannerPromoAngular from '@widgets/BannerPromoAngular.astro';





# Goal

In this tutorial you learn:

* How to use `angular-cli` generators for modules and components
* How to create a multiview Angular Single Page Application (SPA) organized in custom `ngModules` (core, features and shared)
* How to use lazy loading with `root` and `children` routes

Following you can see the result you'll get at the end of the tutorial:

<Img src={import('./images/final-preview-app.gif')} w={600} quality={60} border/>

## lazy loading

The core of the application is loaded by an unique bundle (`main.js`) but each view is loaded "on-demand" with its own chunk ( a separated JavaScript file), that is loaded the first time a route is requested:

As a result, these views will be loaded when user explicitly requests them:


* `app-features-home-home-module.js`
* `app-features-settings-settings-module.js`
* `app-features-users-users-module.js`

<Img src={import('./images/devtools-lazyloading.png')} w={800} quality={60} border/>




In the next recipes you will also be able to lazy load children routes (I mean a primary route with a secondary navigation bar with children routes).







# TOPICS


# Requirements


<Hint title="First time using Angular?" type="info">
  Probably you should start from my [Angular Hello World Tutorial](/tutorials/angular/angular-basics/1-angular-hello-world)
</Hint>

The only requirement you need to make this exercise is [NodeJS](https://nodejs.org/) version 16 or above:

<Hint title="TIPS: multiple Node versions">
  If you need to install multiple versions of Node on your machine you might want to consider tools like **nvm** (node version manager). You could then have an Angular 10 project running on Node 12 and one with React that requires Node 18 at the same time.

  Links: [NVM Windows](https://tecadmin.net/install-nvm-macos-with-homebrew/) | [Install on Mac using HomeBrew](https://tecadmin.net/install-nvm-macos-with-homebrew/)
</Hint>

# Create an Angular project with Angular CLI

Open the terminal, go to the folder in which you would like to create a new Angular project and type the following command to quickly generate an Angular project with the latest version of the framework:

<Code>
  ```bash
  npx -p @angular/cli@latest ng new angular15-router-and-ngmodules  -s -t -S
  ```
</Code>

or, you can install the exact same version I have used to build this tutorial

<Code>
  ```bash
  npx -p @angular/cli@15.2.0 ng new angular15-router-and-ngmodules  -s -t -S
  ```
</Code>

When asked:

* _Ok to proceed?_: Type `y`
* _Would you like to add Angular routing?_: `Yes`
* _Which stylesheet format would you like to use_: Use arrows and select `CSS`

<Img src={import('./images/2023-02-25_16-47-31.png')} w={800} quality={60} border/>


<Hint title="What is NPX?">
  The `npx` (Node Package eXecute) is an NPM package runner and it's automatically installed with Node and NPM.

  It allows developers to execute any Javascript Package available on the NPM registry without even installing it.
  So we use this command to download the latest Angular version, install all the dependencies and create a new project named `demo1`

  <Code>
    ```
    npx -p @angular/cli@latest ng new [PROJECT_NAME]  -s -t -S
    ```
  </Code>

  Other parameters:

  * `-t`: enable inline templates instead of create external HTML files for components
  * `-s`: enable inline styles
  * `-S`: skip (unit) tests
  <br />

  **Why do we set these parameters?**
  <br />
  In Angular you can define the HTML and CSS in external files or, if you prefer, you can integrate them directly into the component.
  I prefer the latter solution because, in this way, we avoid too many files inside the application.
  It's a personal choice that not everyone likes so I suggest you use it to complete this tutorial and you can always switch to external templates in future projects.
</Hint>




Now you can open the terminal and run the project you have just created:

<Code>
  ```bash
  cd angular15-router-and-ngmodules            # go to project folder
  npm start                                    # run project ... wait some seconds
  ```
</Code>



### Check if it works

After the project compilation, you can navigate to [`http://localhost:4200`](http://localhost:4200)  and open the project in your favorite browser to get a preview. I suggest to use Chrome (or Firefox).

<Hint type="empty" title="TIPS">
  1) You can check the terminal for compilation errors (anyway they are also often shown in the browser)
  2) **you should always keep opened browser DevTools to check if there are runtime errors**, as shown in the image below<br />
  <Img isWindowed={false} src={import('./images/preview.png')} w={600} quality={60} border align="center"/>
</Hint>


# Project Structure

Your project structure should look like to the following:

<Img src={import('./images/project-structure.png')} w={300} quality={80} border/>

# Install Bootstrap

Open your terminal and kill the current process by pressing <Key>CTRL</Key> + <Key>C</Key> (probably you need to press it a couple of times).

Now you can install [Bootstrap](https://getbootstrap.com/),  a CSS framework useful to quickly create HTML layouts, by using its  [npm](https://www.npmjs.com/package/bootstrap) package.

Make sure you're in the project **root folder** and run the following command:

<Code>
  ```bash
  npm install bootstrap
  ```
</Code>



<Hint title="How can I be sure I'm the root folder?">
  You're in the root file if it contains the `package.json` file. <br />
  Use `dir`  command (Windows) or `ls` (Mac/Linux) to display the list of files:
  <Img isWindowed={false} src={import('./images/2022-12-11-22-36-13.png')} w={700} quality={60} border align="center"/>
</Hint>


## Global CSS

Bootstrap CSS classes should be globally available in our application since we're using it in several components.

The easiest way to include it in our project is by opening the `angular.json` file and update the `architect.build.styles` property.

So, open `angular.json` (you can find it in the project root folder) and recognize the `styles` property:

<Code title="<code>angular.json</code>">
  ```javascript
  // ...
  "architect": {
    "build": {
      // ...
      "options": {
        // ...
        "styles": [     // <=== HERE
          "src/styles.css"
        ],
      }
    }
  // ...
  }
  ```
</Code>

And now you can add the path of the minified CSS version of the framework you have just installed:

<Code title="<code>angular.json</code>">
  ```json
  {
    // ...
    "styles": [
      "node_modules/bootstrap/dist/css/bootstrap.min.css",
      "src/styles.css"
    ],
    // ...
  }
  ```
</Code>


<Hint title="How did I find the Bootstrap path to include in `angular.json`">
  You just need to open your `node_modules` folder, search the `bootstrap` folder and find the file path:
  <Img isWindowed={false} src={import('./images/2022-12-11-22-48-17.png')} w={400} quality={60} border align="center"/>

</Hint>



### Check if Bootstrap works

Now you just need to check if Bootstrap is properly configured.


<Hint type="alert">
  You have to kill the Angular CLI process by pressing <Key>CTRL</Key> + <Key>C</Key> and run `npm start` again to apply the changes you have done in `angular.json` (since this file is evaluated only the first time, when the applications starts)
</Hint>


Open `src/app.component.ts` and replace all the HTML template content with the following one:

<Code techs={['angular']} title="<code>app.component.ts</code>">
  ```ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  template: `
    <button class="btn btn-success">
      Bootstrap Button
    </button>

    <router-outlet></router-outlet>
  `,
})
export class AppComponent {}

  ```
</Code>

<Hint type="empty" title="What is 'router-outlet'?">
  <code>router-outlet</code> is a component provided by Angular Router to dinamically loads your pages / modules.

  In fact, as we'll see in the next recipes, you can specify to load a component or a module when a specific path is visited, and it will be automatically loaded inside the `router-outlet` that handle like a placeholder to decide the position where you want to load it
</Hint>

Now you can save your work, wait a moment and you should see the following output in your browser (a green button):

<Img  src={import('./images/bootstrap-preview.png')} w={500} quality={60} border align="center"/>


<Hint>
  You can now remove the `<button>` you have just created. It was just a test to check if Bootstrap is properly installed and configured 😅

  <Code techs={['angular']} title="<code>app.component.ts</code>">

  ```
    import { Component } from '@angular/core';

    @Component({
      selector: 'app-root',
      template: `
        <router-outlet></router-outlet>
      `,
    })
    export class AppComponent {}
  ```
  </Code>
</Hint>



<Hint title="VISUAL STUDIO CODE TIPS">
  Some IDE such as [WebStorm](https://www.jetbrains.com/webstorm/) supports Angular inline template out of the box.

  [Visual Studio Code (VSC)](https://code.visualstudio.com/) doesn't support them.

  So I suggest to install the `angular2-inline` extension from the VSC marketplace
  <Img isWindowed={false} src={import('./images/2022-12-15-12-26-41.png')} w={500} quality={60} border align="center"/>

  Anyway I also suggest to install the `Angular Service` extension or, much better, `Angular Essential` by John Papa (a pack of extensions thats already includes it and several other useful extensions for Angular)

  <Img isWindowed={false} src={import('./images/2022-12-15-12-29-14.png')} w={500} quality={60} border align="center"/>

</Hint>


<TutorialSeries frontmatter={frontmatter} />


<br />
  <BannerPromoAngular></BannerPromoAngular>
<br />
