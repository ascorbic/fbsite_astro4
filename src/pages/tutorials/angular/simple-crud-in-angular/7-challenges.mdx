---
layout: ../../../../layouts/TutorialPageLayout.astro
slug: angular/simple-crud-in-angular
route: '7-challenges'
title: Challenges
title1: Angular 15
title2: Tutorial Challenges
author: ['Fabio Biondi']
description: This page does not contain technical information but you can find several micro challenges that you can complete independently to test yourself. <br /> <br /> The goal is verify that you have understood what you have achieved in the previous steps, study other concepts independently and try to integrate them into the project you have created so far. <br/><br/> So, you won't find the solutions here. Try to solve them yourself! 
image: 
  blur: 'angular/simple-crud-in-angular/image.png'
  url: null
  alt: Create a simple CRUD app
  series: 'angular/simple-crud-in-angular/image.png'
pubDate: 2022-12-28
tags: ["angular", "typescript"] 
series: 
  name: "Create a simple CRUD app"
  idx: 7
difficulty: 1
---

import { Image } from 'astro:assets';

import * as ReactDOMServer from 'react-dom/server';
// import Example1 from './demo/Example1';
import Img from '@widgets/Image.astro';
import ImageCarousel from '@widgets/ImageCarousel.astro';
import HDivider from '@widgets/HDivider.astro';
import IFrame from '@widgets/IFrame.astro'; 
import Key from '@widgets/Key.astro';
import Code from '@widgets/Code.astro';
import Phone from '@widgets/Phone.astro';
import DesktopWindow from '@widgets/DesktopWindow.astro';
import Hero from '@widgets/PostHero.astro';
import TutorialSeries from '@widgets/TutorialSeries.astro';
import Hint from '@widgets/Hint.astro';
import Difficulty from '@widgets/Difficulty.astro';
import BannerPromoAngular from '@widgets/BannerPromoAngular.astro';



# TOPICS

# Exercise 1: Clean Coding


<div class="flex gap-3 ml-5 mb-3">
Difficulty: 
<div class="mt-1"> <Difficulty value={1} /></div>
</div>

Currently the `users.service.ts` methods names are `deleteHandler` and `saveHandler`.

Rename them in `deleteUser` and `saveUser` since they are more expressive.



# Exercise 2: Work with models and Angular Pipes

<div class="flex gap-3 ml-5 mb-3">
Difficulty: 
<div class="mt-1"> <Difficulty value={2} /></div>
</div>


1. Add the `creationDate` property to the `User` type
2. Save the timestamp (`Date.now()`)  into this new property when adding a new user 
3. Display and format the date  in every list item close to the label: you can use the built-in `date` pipe

<Hint title="TIP: how to use 'date' pipe">
  <Code>
  ```ts
  {{user.creationDate | date: 'dd MM yyyy'}}
  ```
  </Code>
  Read [DatePipe Doc](https://angular.io/api/common/DatePipe)
</Hint>


# Exercise 3: Form Control Validation


<div class="flex gap-3 ml-5 mb-3">
Difficulty: 
<div class="mt-1"> <Difficulty value={2} /></div>
</div>

The user name (`label` property) is a required field when adding a new user but now you should also check if it contains min 3 chars. 
Your goal is display a different message for each type of error :

* if input field is empty (`required` error): _"User name is required"_
* if input field contains < 3 chars (`minlength` error): _"User name must contains at least 3 chars"_

<Hint>
  Read the official [Form Validation documentation](https://angular.io/guide/form-validation) for more info
</Hint>

<Hint type="empty" title="TIP 1: use attribute form validators to se the minimum length">

<Code>
```html
<input
  [ngModel] 
  required 
  minlength="3"
  #labelInput="ngModel"
>
```
</Code>

</Hint>

<Hint type="empty" title="TIP 2: use following syntax to display error">

  <Code>
  ```html
  <div *ngIf="labelInput.errors?.['required']">...</div>
  <div *ngIf="labelInput.errors?.['minlength']">...</div>
  ```
  </Code>
</Hint>




# Exercise 4: the "Edit User" feature


<div class="flex gap-3 ml-5 mb-3">
Difficulty: 
<div class="mt-1"> <Difficulty value={3} /></div>
</div>

This is the most complex challenge:
**you have to give the possibility to select and highlight any user of the list, populate the form and edit them**.



This is the final result you should achieve:

<Img isWindowed={false} src={import('./images/2022-11-30\_02-12-20 (1) (3).gif')} w={600} quality={60} border align="center"/>


<Hint type="empty" title="TIP 1">

Add a new `selectedUser` property in your service. You don't need to initialize it.

<Code techs={['angular', 'ts']} title="<code>services/users.service.ts</code>">
```javascript
export class UsersService {
  selectedUser: User | null = null;
  //...~
```
</Code>
</Hint>


<Hint type="empty" title="TIP 2">

You must  add the `click` listener to each item of the list in the HTML template and invoke a new method of the service (i.e. `setSelectedUser`).

So, assign `user` to `selectedUser` property of the service:

<Code techs={['angular', 'ts']} title="<code>services/users.service.ts</code>">
```javascript
setSelectedUser(user: User) {
  this.selectedUser = user;
}
```
</Code>

</Hint>



<Hint type="empty" title="TIP 3">

You can use `ngModel` directive to bind (synchronize) an input with a property.

The input value will be updated each time `selectedUsers` changes.

<Code techs={['angular', 'ts']} title="<code>app.component.ts</code>">
```html
<input 
  [ngModel]="usersService.selectedUser?.label"
/>
```
</Code>

<Hint title="Safe Operator `?`">
Use the safe operator "?" (aka known in JS as _Optional Chain Operator_) in order to avoid compiler errors when `selectedUser` is empty
</Hint>

</Hint>


<Hint type="empty" title="TIP 4">

The same form is now used to add and edit users.
You should then invoke a new `save` method after submitting it and use the `selectedUser` property to know if you are adding or editing an user in your `saveHandler` service method:

* if `selectedUser` is empty: it means you're adding a new user
* if `selectedUser` has some values: it means you're editing an exhisting user

<Code>
```typescript

  saveHandler(user: User) {
    if (this.selectedUser) {
      return this.editUser(user);
    } else {
      return this.addUser(user)
    }
  }

```
</Code>



To add a new user you can just use the `POST` method:

<Code>
```typescript
this.http.post<User>(`${this.URL}/users/`, user)
```
</Code>

While to edit an exhisting user you should use `PATCH`:

<Code>
```typescript
 this.http.patch<User>(`${this.URL}/users/${this.selectedUser?.id}`, user)
 // ...
  this.users = this.users.map((u => {
    return u.id === this.selectedUser?.id ? newUser : u;
  }))
```
</Code>
</Hint>


<Hint type="empty" title="TIP 5">
You should also highlight the current active user:

<Img isWindowed={false} src={import('./images/2022-11-30\_02-09-13 (1).gif')} w={600} quality={60} border align="center"/>
</Hint>


<Hint type="empty" title="FINAL RESULT">

<Img isWindowed={false} src={import('./images/2022-11-30_02-12-20 (1).gif')} w={600} quality={60} border align="center"/>

</Hint>

<HDivider secondary>WHAT'S NEXT</HDivider>

<TutorialSeries frontmatter={frontmatter} />



<br />
<BannerPromoAngular></BannerPromoAngular>
<br />

