---
layout: ../../../../layouts/TutorialPageLayout.astro
slug: angular/simple-crud-in-angular
route: '2-display-list'
title: Display a list of items in Angular
title1: Angular 15
title2: Display a list of items
author: ['Fabio Biondi']
description: "In this tutorial you will learn how to work with data and collections: <br /><br /> you'll display a list of elements on screen by using the <code>*ngFor</code> directive,  apply dynamic styles with <code>ngClass</code> directives, create custom TypeScript types and remove elements from the list."
image: 
  blur: 'angular/simple-crud-in-angular/image.png'
  url: null
  alt: Create a simple CRUD app
  series: 'angular/simple-crud-in-angular/image.png'
pubDate: 2022-12-28
tags: ["angular", "typescript"] 
series: 
  name: "Create a simple CRUD app"
  idx: 2
difficulty: 1
---

import { Image } from 'astro:assets';

import * as ReactDOMServer from 'react-dom/server';
// import Example1 from './demo/Example1';
import Img from '@widgets/Image.astro';
import ImageCarousel from '@widgets/ImageCarousel.astro';
import HDivider from '@widgets/HDivider.astro';
import IFrame from '@widgets/IFrame.astro'; 
import Key from '@widgets/Key.astro';
import Code from '@widgets/Code.astro';
import Phone from '@widgets/Phone.astro';
import DesktopWindow from '@widgets/DesktopWindow.astro';
import Hero from '@widgets/PostHero.astro';
import TutorialSeries from '@widgets/TutorialSeries.astro';
import Hint from '@widgets/Hint.astro';

import BannerPromoAngular from '@widgets/BannerPromoAngular.astro';



# TOPICS

# Goal 

In this second part of the tutorial you will learn how to work with data and collections and you'll display a list of elements on screen by using the <code>*ngFor</code> **directive**.

You will also apply dynamic styles with <code>ngClass</code> **directive**, create custom TypeScript types and remove elements from the list.

<Img src={import('./images/image (23).png')} w={500} quality={60} border />

<Hint title="What is a directive?">
  An Angular directive is a sort of custom HTML attribute that handle some logic behind the scenes. 
  <br />
  For example you can use a directive to hide or show an element:

  <Code techs={['angular', 'html']}>
    ```html
    <div *ngIf="condition">Some content</div>
    ```
  </Code>

  Dinamically apply CSS classes 
  
  <Code techs={['angular', 'html']}>
    ```html
    <div [ngClass]="{'customCSSclass': condition}">...
    ```
  </Code>

  Clone a part of the template looping thorgh array

  <Code techs={['angular', 'html']}>
    ```html
    <div *ngFor="let item of items">{{item.prop}}</div>
    ```
  </Code>


  You can also create your own custom directives. <br />
  For example, the following one may hide the HTML element if user is not logged

  <Code techs={['angular', 'html']}>
    ```html
    <button *ifLogged>Some content</button>
    ```
  </Code>
</Hint>




# Create the `User` type

Angular in written in TypeScript and we want that our code is strongly typed too.
We have to display a list of "users" so, first, we have to create a custom type to represent the `User` entity. 

Create a new `src/app/model` folder and add a file named `user.ts` into it. 
The complete path is `src/app/model/user.ts`:

<Img src={import('./images/image (11).png')} w={300} quality={60} border />


The following interface allow you to create a new custom type that represents the structure of the `User` entity:

<Code techs={['js', 'angular']} title="src/app/model/user.ts">
```typescript
export interface User {
  id: number;
  label: string;
  gender: string;
  age: number;
}
```
</Code>




# Interpolation and Pipes

Open `app.component.ts`, create an array of users and display its content in the template.

<Hint title="Interpolation (aka Template Tags)">
Interpolation allow you to embed expressions into your HTML templates:

<Code>
```html
  <div>{{1+1}}</div>                  <!-- output: 2 -->
  <div>{{yourname}}</div>             <!-- output: the value of yourname  -->
  <div>{{condition ? x : y }}</div>   <!-- output: x or y in according with the condition -->
```
</Code>
</Hint>

<Code techs={['angular', 'ts']} title="<code>app.component.ts</code>">
```javascript
import { Component } from '@angular/core';
import { User } from './model/user';

@Component({
  selector: 'app-root',
  template: `
    <h4>Users</h4>
    <pre>{{users | json}}</pre>
  `,
  styles: [``]
})
export class AppComponent {
  users: User[] = [                                 // list of users
    { id: 1, label: 'Fabio', gender: 'M', age: 20 },
    { id: 2, label: 'Lorenzo', gender: 'M', age: 37 },
    { id: 3, label: 'Silvia', gender: 'F', age: 70 },
  ];
}
```
</Code>

<Hint title="What is the `json` pipe?">
  Angular pipes are sort of formatters. There are several [built-in pipes in angular](https://angular.io/guide/pipes) to format dates, numbers, currencies and many others. Furthermore you can also create your own (sync and async) custom pipes.

  The `json` pipe allow you to display (`stringify`) the content of objects and arrays, since you won't be able to see their content by default.
  
 
 You can also try to remove the `json` pipe and see what's happen: `<pre>{{users}}</pre>`. 
</Hint>


<Hint type="empty" title="Why do i use inline HTML templates?">
I'm using inline templates, instead of external templates, just to avoid opening too many files during this workshop.
You may also create a separated file for your HTML template and another one for your component's CSS but I usually prefer this way in real world projects too in order to decrease the amount of files.

Read more about this in the [previous chapter](./1-create-an-angular-project)
</Hint>

#### TRY IT

Open your browser on [http://localhost:4200](https://localhost:4200) and see the result:

You should just display the following output:

<Img src={import('./images/image (20).png')} w={600} quality={60} border />




# `ngFor`: display a list of users 

In this recipe you display a list of users:

<Img src={import('./images/image (10).png')} w={600} quality={60} border />

You can use the `*ngFor` directive that simply clones the template in which it's applied for each item of an array.

So you can replace the previous HTML template with the following one:

<Code techs={['angular', 'html']} title="<code>app.component.ts</code>">
```html
<div class="container">
  <h1>Users</h1>
  <ul class="list-group">
    <li *ngFor="let u of users" class="list-group-item">
      {{u.label}}
    </li>
  </ul>
</div>
```
</Code>

You should see the following result:

<Img src={import('./images/image (13).png')} w={400} quality={60} border />


<Hint type="info">
  Get more info about the `ngFor` directive reading the [official documentation](https://angular.io/guide/built-in-directives#ngFor)
</Hint>


# `ngClass`: dynamic CSS icons

Our goal is now display a different [font-awesome](https://fontawesome.com/v4/icons/) icon to represent the user's gender, close to its name.

<Img src={import('./images/image (7).png')} w={300} quality={60} border />

The syntax to display a [font-awesome](https://fontawesome.com/v4/icons/) icon is the following:

<Code techs={['html']}>

```html
<i class="fa fa-[ICON]">        <!-- Any icon-->
<i class="fa fa-google">        <!-- Google icon -->
<i class="fa fa-mars">          <!-- Man Icon -->
<i class="fa fa-venus">         <!-- Woman Icon -->
<i class="fa fa-3x fa-mars">   <!-- Increase size -->
<i class="fa fa-3x fa-venus">   <!-- Increase size -->
```
</Code>

So we should simply shown an icon close to the user's name: 

`fa fa-mars` for men, `fa fa-venus` for women and so on... <br />

We might create two HTML elements, for each icon:


<Code techs={['angular', 'html']} title="<code>app.component.ts</code>">
```html
<li *ngFor="let u of users" class="list-group-item">
  <i class="fa fa-3x fa-mars" *ngIf="u.gender === 'M'"></i>
  <i class="fa fa-3x fa-venus" *ngIf="u.gender === 'F'"></i>
  
  {{u.label}}
</li>
```
</Code>



Anyway, you may have noticed that the classes `fa fa-3x` are the same for each icon, while the last part changes.
So we can use this trick:

* we create just one icon instead of a different icon for each gender;
* we statically apply `fa fa-3x` to each icon by using the HTML `class` attribute;
* we use the `ngClass` directive to add a different class in according with the condition.



<Code techs={['angular', 'html']} title="<code>app.component.ts</code>">
```html
 <div class="container">
    <h1>Users</h1>
    <ul class="list-group">
      <li *ngFor="let u of users" class="list-group-item">
        <i
          class="fa fa-3x"
          [ngClass]="{
          'fa-mars': u.gender === 'M',
          'fa-venus': u.gender === 'F'
        }"
        ></i>
        
        {{u.label}}
      </li>
    </ul>
  </div>
```
</Code>

Your application should now display the properly icon close to the user's name, as shown in the image above.



# Custom CSS

Sometimes the CSS frameworks you have included in your projects does not fully meet your needs and you have to create your own custom classes.

<Hint type="empty" title="GOAL">
In this example we just want to set a different background color for women and men. <br /> I'm sorry for the stereotypes. It's just an example
<Img isWindowed={false} src={import('./images/image (10).png')} w={600} quality={60} border />


</Hint>

The main ways to achieve this goal are the following two:

1) **GLOBAL CSS**: add your custom classes into `src/styles.css`, so your CSS will be globally available throughout your application. Anyway the risk of having conflicts with other classes is very high. 

2) **LOCAL CSS** (encapsulated): add your classes directly into your components so they will only be available in the component that have defined them. 

Whenever possible I would use the second strategy, since it is the least risky.

So add following CSS classes in the `styles` property of `app.component`:

<Code techs={['angular', 'css']} title="<code>app.component.ts</code>">
```typescript
styles: [`
  .male { background-color: #36caff; }
  .female { background-color: pink; }
`]
```
</Code>



<Hint type="tip">
  You may also use an external CSS file by using the following syntax:
  <Code>
    ```typescript
    styleUrls: [`./app.component.css`]
    ```
  </Code>
</Hint>


And add the `ngClass` directive to the HTML element that contain the `*ngFor`:

<Code techs={['angular', 'html']} title="<code>app.component.ts</code>">
```html
  <!-- missing part -->
  <li
    *ngFor="let u of users" class="list-group-item"
    [ngClass]="{
      'male': u.gender === 'M', 
      'female': u.gender === 'F'
    }"
  >
  <!-- missing part -->           
```
</Code>




### COMPLETED SOURCE CODE

So far, your `app.component.ts` file should look like the following:

<Code techs={['angular']} title="<code>app.component.ts</code>">
```typescript
import { Component } from '@angular/core';
import { User } from './model/user';

@Component({
  selector: 'app-root',
  template: `
    <div class="container">
      <h1>Users</h1>
      <ul class="list-group">
        <li
          *ngFor="let u of users" class="list-group-item"
          [ngClass]="{
            'male': u.gender === 'M', 
            'female': u.gender === 'F'
          }"
        >
          <i
            class="fa fa-3x"
            [ngClass]="{
            'fa-mars': u.gender === 'M',
            'fa-venus': u.gender === 'F'
          }"
          ></i>
          
          {{u.label}}
        </li>
      </ul>
    </div>
  `,
  styles: [`
    .male { background-color: #36caff; }
    .female { background-color: pink; }
  `]
})
export class AppComponent {
  users: User[] = [
    { id: 1, label: 'Fabio', gender: 'M', age: 20 },
    { id: 2, label: 'Lorenzo', gender: 'M', age: 37 },
    { id: 3, label: 'Silvia', gender: 'F', age: 70 },
  ];
}
```
</Code>






# Remove an Item

In this recipe you will add a "TRASH" icon to each list item in order to delete a specific user.

<Img src={import('./images/image (23).png')} w={400} quality={60} border  />

1) we have to display a "Trash" icon in `app.component.ts` in each list item (aligned to the right side) 
2) we have to set a `click` event listener to each icon and invoke the (new) `deleteHandler` method, passing the user to remove as paremeter.

<Code techs={['angular', 'html']} title="<code>app.component.ts</code>">
```html
<!-- missing part -->
{{u.label}}
<i class="fa fa-trash fa-2x pull-right" (click)="deleteHandler(u)"></i>
<!-- missing part -->
```
</Code>

<Hint>
You may also pass the `id` only instead of the whole `User` object
</Hint>

Add the new `deleteHandler()` method to `app.component` class. <br />
This method simply use the [`filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter) array method to create a new collection with all items **except** the element to remove.

<Code techs={['angular', 'ts']} title="<code>app.component.ts</code>">
```javascript
deleteHandler(userToRemove: User) {
  this.users = this.users.filter(u => u.id !== userToRemove.id);
}
```
</Code>

<Hint title="IMMUTABILITY">
Why did I filter the `users` array by creating a new reference?

I may simply use the following strategy to accomplish the same task:

<Code>
```typescript
const index = this.users.findIndex(u => u.id === userToRemove.id);
this.users.splice(index, 1); // mutate the array removing an element
```
</Code>

I'm using what is called ["Immutability"](https://developer.mozilla.org/en-US/docs/Glossary/Immutable).

In fact I don't mutate data (`users`, in our example) but I have completely created a new array reference by using the `filter` array method (that generates a new array reference) 


But why?

Currently there are no differences between the two approaches but you may need to optimize performance in the future or use an Angular feature that requires this approach.
So I think it is important to get an idea of its existence in order to be able to explore it independently.

</Hint>




### Final source code

<Code techs={['angular', 'ts']} title="<code>app.component.ts</code>">
```ts
import { Component } from '@angular/core';
import { User } from './model/user';

@Component({
  selector: 'app-root',
  template: `
    <div class="container">
      <h1>Users</h1>
      <ul class="list-group">
        <li
          *ngFor="let u of users" class="list-group-item"
          [ngClass]="{
            'male': u.gender === 'M', 
            'female': u.gender === 'F'
          }"
        >
          <i
            class="fa fa-3x"
            [ngClass]="{
            'fa-mars': u.gender === 'M',
            'fa-venus': u.gender === 'F'
          }"
          ></i>
          
          {{u.label}}

          <i class="fa fa-trash fa-2x pull-right" (click)="deleteHandler(u)"></i>
        </li>
      </ul>
    </div>
  `,
  styles: [`
    .male { background-color: #36caff; }
    .female { background-color: pink; }
  `]
})
export class AppComponent {
  users: User[] = [                                 // list of users
    { id: 1, label: 'Fabio', gender: 'M', age: 20 },
    { id: 2, label: 'Lorenzo', gender: 'M', age: 37 },
    { id: 3, label: 'Silvia', gender: 'F', age: 70 },
  ];

  deleteHandler(userToRemove: User) {
    this.users = this.users.filter(u => u.id !== userToRemove.id);
  }
}

```
</Code>

### TRY IT

You should now able to remove elements from the list.

Try it on [`http://localhost:4200`](https://localhost:4200) or use the interactive code playground below:

<Img src={import('./images/image (23).png')} w={400} quality={60} border  />












<HDivider secondary>WHAT'S NEXT</HDivider>

<TutorialSeries frontmatter={frontmatter} />

  <br />
  <BannerPromoAngular></BannerPromoAngular>
  <br />



