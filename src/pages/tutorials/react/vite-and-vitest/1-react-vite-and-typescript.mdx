---
layout: ../../../../layouts/TutorialPageLayout.astro
slug: react/vite-and-vitest
route: '1-react-vite-and-typescript'
title: React, Vite 4 & TypeScript
title1: React, Vite 4 & TypeScript
title2: Enable Type Checking 
author: ['Fabio Biondi']
description: Vite doesn't support type-checking while developing your application. In this chapter we'll see how to create a React / TypeScript project using Vite 4.x and how to enable type-checking in both, "Vite Serve" and "Vite Build".
image: 
  blur: 'react/vite-and-vitest/image.png'
  url: null
  alt: Hello React Vitest
  series: 'react/vite-and-vitest/image.png'
pubDate: 2022-12-26
tags: ["react", "typescript"] 
series: 
  name: "React, TypeScript and Vitest: write your first test"
  idx: 1
difficulty: 1
draft: false
---

import { Image } from 'astro:assets';

import Img from '@widgets/Image.astro';
import ImageCarousel from '@widgets/ImageCarousel.astro';
import HDivider from '@widgets/HDivider.astro';
import IFrame from '@widgets/IFrame.astro'; 
import Key from '@widgets/Key.astro';
import Code from '@widgets/Code.astro';
import Phone from '@widgets/Phone.astro';
import DesktopWindow from '@widgets/DesktopWindow.astro';
import Hero from '@widgets/PostHero.astro';
import TutorialSeries from '@widgets/TutorialSeries.astro';
import StackBlitz from '@widgets/StackBlitz'
import Hint from '@widgets/Hint.astro';



<Hint>
  This is a step-by-step tutorial so you can try to reproduce it on your machine. 
  
  The only requirement is the latest LTS version of [Node](https://nodejs.org/) or, at least, it should be greater than `16.0.0`.
</Hint>

First create a new React project with [Vite](https://vitejs.dev/):

<Code>
```ts
npm create vite@latest
```
</Code>

Set a project name (i.e. `react-vitest`), select `React` -> `TypeScript`.

<Img src={import('./images/2023-01-04-03-45-01.png')} w={600} quality={60} border />

### Install all dependencies:

<Code>
```ts
cd react-vitest  # project folder
npm i            # install all deps
```
</Code>

# Add fully-support for TypeScript

Open the project in your favorite editor and open the file `main.tsx`. 

Add the following (wrong) code that should generated a compiler error, since we're assigning a `string` to a `number`:

<Code title="<Code>src/main.tsx</Code>" techs={['react', 'ts']}>
```ts
// ...
const value: number = 'abc'; // <== 
// ...
```
</Code>

Run the project:

<Code>
```
npm run dev
```
</Code>

We don't get any error!! ðŸ˜± 

<Img src={import('./images/2023-01-04-04-05-51.png')} w={400} quality={60} border />

Honestly I would like enable type-checking while I'm developing ( while using "Vite Serve" ):

<Hint>
  ViteJS uses ESBuild to compile your code while developing since it's super fast but it doesn't support type checking.

</Hint>

There are several ways to type-check your code:

* manual run `tsc` in a completely new terminal
* configure your editor to run TypeScript
* run a build with `npm run build` (yes, type-checking works at build time!)
* or, my favorite one: you can install the [vite-plugin-checker](https://vite-plugin-checker.netlify.app/) to enable type checking in both, "Vite Serve" and "Build Mode":

<Code>
```ts
npm i vite-plugin-checker -D
```
</Code>

Now update `vite.config.ts` to enable the plugin:


<Code>
```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import checker from 'vite-plugin-checker';

export default defineConfig({
  plugins: [
    react(),
    checker({ typescript: true }),
  ],
})

```
</Code>


Now, if we re-run the project with `npm run dev`  we'll get some errors, and of course this is our goal since a `string` cannot be a `number`

<Img src={import('./images/2023-01-04-04-09-05.png')} w={700} quality={60} border />

<Hint>
  Don't forget to remove the code you have added in `main.tsx` or you'll always receive some errors
</Hint>

In the next chapter you'll configure Vitest to run your first test!

<TutorialSeries frontmatter={frontmatter} />
